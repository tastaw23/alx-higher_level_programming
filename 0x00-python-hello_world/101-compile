#!/bin/bash

# Check if PYFILE is set
if [ -z "$PYFILE" ]; then
    echo "Error: PYFILE environment variable not set."
    exit 1
fi

# Check if the specified Python file exists
if [ ! -f "$PYFILE" ]; then
    echo "Error: Python file '$PYFILE' not found."
    exit 1
fi

# Generate the output filename
OUTPUT_FILE="${PYFILE%.py}.pyc"

# Compile the Python script
python3 -m py_compile "$PYFILE" -o "$OUTPUT_FILE"

# Check if the compilation was successful
if [ $? -eq 0 ]; then
    echo "Compiling $PYFILE ... Done"
    echo "Output filename: $OUTPUT_FILE"
else
    echo "Error: Compilation of $PYFILE failed."
    exit 1
fi
